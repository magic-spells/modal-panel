{"version":3,"file":"modal-panel.js","sources":["../src/modal-panel.js"],"sourcesContent":["import './modal-panel.css';\n\nclass ModalPanel extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.id = this.getAttribute('id');\n\t\tthis.content = this.querySelector('modal-content');\n\t\tthis.setAttribute('aria-hidden', 'true');\n\n\t\tthis.prepend(document.createElement('modal-overlay'));\n\n\t\tthis.bindUI();\n\t}\n\n\tbindUI() {\n\t\tdocument.addEventListener('click', (e) => {\n\t\t\tif (!e.target.closest(`[aria-controls=\"${this.id}\"]`)) return;\n\t\t\tif (e.target.getAttribute('data-prevent-default') == 'true') {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\tthis.show();\n\t\t});\n\n\t\tthis.addEventListener('click', (e) => {\n\t\t\tif (!e.target.closest('[data-action=\"hide-modal\"]')) return;\n\t\t\tthis.hide();\n\t\t});\n\t}\n\n\tshow() {\n\t\tthis.setAttribute('aria-hidden', 'false');\n\t\tthis.classList.remove('hide');\n\t\tdocument.body.classList.add('overflow-hidden');\n\n\t\t// Focus the first focusable element inside the modal-content\n\t\tconst firstFocusable = this.querySelector(\n\t\t\t'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n\t\t);\n\t\tif (firstFocusable) {\n\t\t\tfirstFocusable.focus();\n\t\t}\n\t}\n\n\thide() {\n\t\t// Trigger hide animations\n\t\tthis.classList.add('hide');\n\t\tdocument.body.classList.remove('overflow-hidden');\n\t\tsetTimeout(() => {\n\t\t\tthis.setAttribute('aria-hidden', 'true');\n\t\t\tthis.classList.remove('hide');\n\t\t}, 400);\n\t}\n}\n\nclass ModalOverlay extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t\t// Make sure this is focusable\n\t\tthis.setAttribute('tabindex', 0);\n\t\tthis.modalPanel = this.closest('modal-panel');\n\t\tthis.bindUI();\n\t}\n\n\tbindUI() {\n\t\tthis.addEventListener('click', () => {\n\t\t\tthis.modalPanel.hide();\n\t\t});\n\t}\n}\n\nclass ModalContent extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t}\n}\n\ncustomElements.define('modal-panel', ModalPanel);\ncustomElements.define('modal-overlay', ModalOverlay);\ncustomElements.define('modal-content', ModalContent);\n"],"names":[],"mappings":"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"}