var ModalPanel=function(t){"use strict";const e=t=>Array.from(t.querySelectorAll('summary, a[href], button:not(:disabled), [tabindex]:not([tabindex^="-"]):not(focus-trap-start):not(focus-trap-end), [draggable], area, input:not([type=hidden]):not(:disabled), select:not(:disabled), textarea:not(:disabled), object, iframe'));class FocusTrap extends HTMLElement{static styleInjected=!1;constructor(){super(),this.trapStart=null,this.trapEnd=null,FocusTrap.styleInjected||(this.injectStyles(),FocusTrap.styleInjected=!0)}injectStyles(){const t=document.createElement("style");t.textContent="\n      focus-trap-start,\n      focus-trap-end {\n        position: absolute;\n        width: 1px;\n        height: 1px;\n        margin: -1px;\n        padding: 0;\n        border: 0;\n        clip: rect(0, 0, 0, 0);\n        overflow: hidden;\n        white-space: nowrap;\n      }\n    ",document.head.appendChild(t)}connectedCallback(){this.setupTrap(),this.addEventListener("keydown",this.handleKeyDown)}disconnectedCallback(){this.removeEventListener("keydown",this.handleKeyDown)}setupTrap(){0!==e(this).length&&(this.trapStart=document.createElement("focus-trap-start"),this.trapEnd=document.createElement("focus-trap-end"),this.prepend(this.trapStart),this.append(this.trapEnd),requestAnimationFrame((()=>{this.trapStart.focus()})))}handleKeyDown=t=>{"Escape"===t.key&&(t.preventDefault(),this.exitTrap())};exitTrap(){const t=this.closest('[aria-hidden="false"]');if(!t)return;t.setAttribute("aria-hidden","true");const e=document.querySelector(`[aria-expanded="true"][aria-controls="${t.id}"]`);e&&(e.setAttribute("aria-expanded","false"),e.focus())}}class FocusTrapStart extends HTMLElement{connectedCallback(){this.setAttribute("tabindex","0"),this.addEventListener("focus",this.handleFocus)}disconnectedCallback(){this.removeEventListener("focus",this.handleFocus)}handleFocus=t=>{const n=this.closest("focus-trap"),s=e(n);if(0===s.length)return;const a=s[0],o=s[s.length-1];t.relatedTarget===a?o.focus():a.focus()}}class FocusTrapEnd extends HTMLElement{connectedCallback(){this.setAttribute("tabindex","0"),this.addEventListener("focus",this.handleFocus)}disconnectedCallback(){this.removeEventListener("focus",this.handleFocus)}handleFocus=()=>{this.closest("focus-trap").querySelector("focus-trap-start").focus()}}customElements.define("focus-trap",FocusTrap),customElements.define("focus-trap-start",FocusTrapStart),customElements.define("focus-trap-end",FocusTrapEnd),document.addEventListener("keydown",(function(t){if("Enter"!==t.key)return;const e=t.target.closest("[aria-controls]");if(!e)return;t.preventDefault();const n=e.getAttribute("aria-controls"),s=document.getElementById(n);if(!s)return;const a=s.querySelector("focus-trap-start");a&&(e.setAttribute("aria-expanded","true"),s.setAttribute("aria-hidden","false"),requestAnimationFrame((()=>{a.focus()})))}));class ModalPanel extends HTMLElement{constructor(){super(),this.id=this.getAttribute("id"),this.setAttribute("aria-hidden","true"),this.contentPanel=this.querySelector("modal-content"),this.focusTrap=document.createElement("focus-trap"),this.contentPanel.parentNode.insertBefore(this.focusTrap,this.contentPanel),this.focusTrap.appendChild(this.contentPanel),this.prepend(document.createElement("modal-overlay")),this.bindUI()}bindUI(){document.addEventListener("click",(t=>{t.target.closest(`[aria-controls="${this.id}"]`)&&("true"==t.target.getAttribute("data-prevent-default")&&t.preventDefault(),this.show())})),this.addEventListener("click",(t=>{t.target.closest('[data-action="hide-modal"]')&&this.hide()}))}show(){this.setAttribute("aria-hidden","false"),document.body.classList.add("overflow-hidden");const t=this.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');t&&t.focus()}hide(){document.body.classList.remove("overflow-hidden"),setTimeout((()=>{this.setAttribute("aria-hidden","true")}),400)}}class ModalOverlay extends HTMLElement{constructor(){super(),this.setAttribute("tabindex",0),this.modalPanel=this.closest("modal-panel"),this.bindUI()}bindUI(){this.addEventListener("click",(()=>{this.modalPanel.hide()}))}}class ModalContent extends HTMLElement{constructor(){super()}}return customElements.define("modal-panel",ModalPanel),customElements.define("modal-overlay",ModalOverlay),customElements.define("modal-content",ModalContent),t.ModalContent=ModalContent,t.ModalOverlay=ModalOverlay,t.ModalPanel=ModalPanel,t.default=ModalPanel,Object.defineProperty(t,"__esModule",{value:!0}),t}({});
